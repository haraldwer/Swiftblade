#include "Shaders/Uniforms/SH_FrameUniforms.si"

uniform sampler2D TexIrradiance;
uniform sampler2D TexPrefilter;

uniform sampler2D TexFrameIrradiance;
uniform sampler2D TexFramePrefilter;

in vec2 TexCoord;

layout(location = 0) out vec4 OutIrradiance;
layout(location = 1) out vec4 OutPrefilter;

void main()
{
    vec4 irradianceFrame = texture(TexFrameIrradiance, TexCoord);
    vec3 prefilterFrame = texture(TexFramePrefilter, TexCoord).rgb;
    vec4 irradiance = texture(TexIrradiance, TexCoord);
    vec3 prefilter = texture(TexPrefilter, TexCoord).rgb;
    
    OutIrradiance.rgb = mix(irradiance.rgb, irradianceFrame.rgb, 0.1f);
    OutIrradiance.a = irradianceFrame.a;
    
    OutPrefilter.rgb = mix(prefilter, prefilterFrame, 0.1f);
    OutPrefilter.a = 1.0f;
}