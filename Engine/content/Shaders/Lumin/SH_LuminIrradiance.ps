#include "Shaders/Uniforms/SH_FrameUniforms.si"
#include "Shaders/Uniforms/SH_TexUniforms.si"
#include "Shaders/Utility/SH_Utility.si"

#include "Shaders/Lumin/SH_LuminCollect.si"

in vec2 TexCoord;
in vec2 RectCoord;

layout(location = 0) out vec4 OutIrradiance;

void main()
{
    vec3 worldPos;
    vec3 normal;
    vec3 viewDir;

    vec4 coeffs[9];
    float weight = GetSampleCoeffs(worldPos, coeffs);

    OutIrradiance.rgb = SampleSHIrradiance(viewDir, coeffs);
    OutIrradiance.a = weight;
}
